<!-- Do not edit this file. It is automatically generated by API Documenter. -->

[Home](./index.md) &gt; [reselect](./reselect.md) &gt; [weakMapMemoize](./reselect.weakmapmemoize.md)

## weakMapMemoize() function

Creates a tree of `WeakMap`<!-- -->-based cache nodes based on the identity of the arguments it's been called with (in this case, the extracted values from your input selectors). This allows `weakMapMemoize` to have an effectively infinite cache size. Cache results will be kept in memory as long as references to the arguments still exist, and then cleared out as the arguments are garbage-collected.

\_\_Design Tradeoffs for `weakMapMemoize`<!-- -->:\_\_ - Pros: - It has an effectively infinite cache size, but you have no control over how long values are kept in cache as it's based on garbage collection and `WeakMap`<!-- -->s. - Cons: - There's currently no way to alter the argument comparisons. They're based on strict reference equality. - It's roughly the same speed as `lruMemoize`<!-- -->, although likely a fraction slower.

\_\_Use Cases for `weakMapMemoize`<!-- -->:\_\_ - This memoizer is likely best used for cases where you need to call the same selector instance with many different arguments, such as a single selector instance that is used in a list item component and called with item IDs like:

```ts
  useSelector(state => selectSomeData(state, props.category))
```

**Signature:**

```typescript
export declare function weakMapMemoize<Func extends AnyFunction>(func: Func, options?: WeakMapMemoizeOptions<ReturnType<Func>>): Func & Simplify<DefaultMemoizeFields>;
```

## Parameters

<table><thead><tr><th>

Parameter


</th><th>

Type


</th><th>

Description


</th></tr></thead>
<tbody><tr><td>

func


</td><td>

Func


</td><td>

The function to be memoized.


</td></tr>
<tr><td>

options


</td><td>

[WeakMapMemoizeOptions](./reselect.weakmapmemoizeoptions.md)<!-- -->&lt;ReturnType&lt;Func&gt;&gt;


</td><td>

_(Optional)_


</td></tr>
</tbody></table>
**Returns:**

Func &amp; Simplify&lt;[DefaultMemoizeFields](./reselect.defaultmemoizefields.md)<!-- -->&gt;

A memoized function with a `.clearCache()` method attached.

## Example 1

\#\#\# Using `createSelector`

```ts
import { createSelector, weakMapMemoize } from 'reselect'

interface RootState {
  items: { id: number; category: string; name: string }[]
}

const selectItemsByCategory = createSelector(
  [
    (state: RootState) => state.items,
    (state: RootState, category: string) => category
  ],
  (items, category) => items.filter(item => item.category === category),
  {
    memoize: weakMapMemoize,
    argsMemoize: weakMapMemoize
  }
)
```

## Example 2

\#\#\# Using `createSelectorCreator`

```ts
import { createSelectorCreator, weakMapMemoize } from 'reselect'

const createSelectorWeakMap = createSelectorCreator({ memoize: weakMapMemoize, argsMemoize: weakMapMemoize })

const selectItemsByCategory = createSelectorWeakMap(
  [
    (state: RootState) => state.items,
    (state: RootState, category: string) => category
  ],
  (items, category) => items.filter(item => item.category === category)
)
```

